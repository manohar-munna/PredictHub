<!-- app/templates/base.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PredictHub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #475569; }
        
        /* Mobile Menu Animation */
        #mobile-menu { transition: all 0.3s ease-in-out; max-height: 0; opacity: 0; overflow: hidden; }
        #mobile-menu.open { max-height: 500px; opacity: 1; }
    </style>
</head>
<body class="bg-slate-950 text-slate-300 font-sans min-h-screen flex flex-col selection:bg-indigo-500 selection:text-white">

    <!-- Navigation -->
    <nav class="bg-slate-900 border-b border-slate-800 sticky top-0 z-50 backdrop-blur-md bg-opacity-90">
        <div class="max-w-7xl mx-auto px-4 py-3">
            
            <div class="flex justify-between items-center">
                <!-- Logo -->
                <a href="/" class="text-xl font-bold tracking-wide text-white flex items-center gap-2">
                    <span class="text-2xl">âš¡</span> PredictHub
                </a>
                
                <!-- Desktop Links (Hidden on Mobile) -->
                <div class="hidden md:flex space-x-6 text-sm font-medium text-slate-400">
                    <a href="/markets" class="hover:text-white transition">Markets</a>
                    <a href="/leaderboard" class="hover:text-white transition">Leaderboard</a>
                    <a href="/news" class="hover:text-white transition">News</a>
                    {% if is_admin %}
                        <a href="/admin/users" class="text-yellow-500 hover:text-yellow-400 transition">Manage</a>
                    {% endif %}
                </div>

                <!-- User Actions (Desktop) -->
                <div class="hidden md:flex items-center gap-4 text-sm font-medium">
                    {% if user %}
                        <a href="/profile" class="flex items-center gap-2 hover:bg-slate-800 px-3 py-1.5 rounded-full transition border border-slate-700">
                            <span class="text-white">{{ user.username }}</span>
                            <span class="bg-indigo-600 text-white text-xs px-2 py-0.5 rounded font-bold">
                                {{ user.balance }}
                            </span>
                        </a>
                        <a href="/logout" class="text-slate-400 hover:text-white transition">Log Out</a>
                    {% else %}
                        <a href="/login" class="text-slate-300 hover:text-white transition">Log In</a>
                        <a href="/register" class="bg-white text-slate-900 px-4 py-2 rounded-lg font-bold hover:bg-slate-200 transition">
                            Sign Up
                        </a>
                    {% endif %}
                </div>

                <!-- Mobile Hamburger Button -->
                <div class="md:hidden flex items-center">
                    <button onclick="toggleMobileMenu()" class="text-slate-300 hover:text-white focus:outline-none">
                        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Mobile Menu Dropdown -->
            <div id="mobile-menu" class="md:hidden mt-2 border-t border-slate-800 flex flex-col space-y-4 pb-4">
                <br>
                <a href="/markets" class="block text-slate-300 hover:text-white font-medium pl-2 border-l-2 border-transparent hover:border-indigo-500 transition">Markets</a>
                <a href="/leaderboard" class="block text-slate-300 hover:text-white font-medium pl-2 border-l-2 border-transparent hover:border-indigo-500 transition">Leaderboard</a>
                <a href="/news" class="block text-slate-300 hover:text-white font-medium pl-2 border-l-2 border-transparent hover:border-indigo-500 transition">News</a>
                {% if is_admin %}
                    <a href="/admin/users" class="block text-yellow-500 font-medium pl-2">âš¡ Manage Users</a>
                {% endif %}
                
                <div class="border-t border-slate-800 pt-4 mt-2">
                    {% if user %}
                        <div class="flex items-center justify-between px-2">
                            <span class="text-white font-bold">{{ user.username }}</span>
                            <span class="bg-yellow-500 text-black text-xs px-2 py-1 rounded font-bold">ðŸ’° {{ user.balance }}</span>
                        </div>
                        <a href="/profile" class="block mt-3 text-sm text-indigo-400">View Profile</a>
                        <a href="/logout" class="block mt-3 text-sm text-slate-400">Log Out</a>
                    {% else %}
                        <div class="flex gap-4">
                            <a href="/login" class="flex-1 text-center py-2 text-slate-300 border border-slate-700 rounded-lg">Log In</a>
                            <a href="/register" class="flex-1 text-center py-2 bg-white text-slate-900 font-bold rounded-lg">Sign Up</a>
                        </div>
                    {% endif %}
                </div>
            </div>

        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow max-w-[1600px] w-full mx-auto px-4 sm:px-6 py-8">
        {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer class="border-t border-slate-800 bg-slate-900 text-slate-500 py-6 text-center text-xs">
        <p>&copy; 2024 PredictHub. Decentralized Information Markets.</p>
    </footer>

    <!-- Mobile Menu Script -->
    <script>
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('open');
        }
    </script>

</body>
</html>